{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = '46932892-ab4a09809774f514baea4f6c0';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const { data } = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","// render-functions.js\n\nexport function renderImages(images, container) {\n    const imageCards = images.map(image => {\n      return `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <div class=\"image-card\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            <div class=\"info\">\n              <p><b>Likes:</b> ${image.likes}</p>\n              <p><b>Views:</b> ${image.views}</p>\n              <p><b>Comments:</b> ${image.comments}</p>\n              <p><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n          </div>\n        </a>\n      `;\n    }).join('');\n  \n    container.insertAdjacentHTML('beforeend', imageCards);\n  }\n  \n  export function clearResults(container) {\n    container.innerHTML = '';\n  }","// main.js\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages, clearResults } from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.input-search');\nconst resultsContainer = document.querySelector('.results-container');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.js-load-more');\n\nlet query = ''; // Пошуковий запит\nlet page = 1; // Поточна сторінка\nconst perPage = 15; // Кількість зображень на сторінку\nlet totalHits = 0; // Загальна кількість результатів\nlet lightbox = new SimpleLightbox('.results-container .gallery-item', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', (event) => {\n  event.preventDefault();\n  \n   query = searchInput.value.trim();\n  \n  if (query === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n    });\n    return;\n  }\n\n  page = 1;\n  totalHits = 0;\n\n  clearResults(resultsContainer);\n  fetchAndDisplayImages(query);\n});\n\nloadMore.addEventListener('click',()=>{\n    page+=1;\n    fetchAndDisplayImages();    \n})\n\nfunction fetchAndDisplayImages() {\n  loader.style.display = 'block'; // Показуємо індикатор завантаження\n\n  fetchImages(query, page, perPage)\n    .then(data => {\n      loader.style.display = 'none'; // Ховаємо індикатор завантаження\n\n        totalHits=data.totalHits;\n      if (data.hits.length === 0 && page ===1) {\n        iziToast.info({\n          title: 'No results',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      renderImages(data.hits, resultsContainer);\n      lightbox.refresh(); // Оновлюємо lightbox після додавання нових зображень\n\n      if (page > 1) {\n        scrollPage();\n      }\n    \n      if (page * perPage >= totalHits) {\n        loadMore.classList.replace('load-more', 'load-more-hidden'); // Ховаємо кнопку\n        iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        loadMore.classList.replace('load-more-hidden', 'load-more'); // Показуємо кнопку\n      }\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      loadMore.classList.replace('load-more', 'load-more-hidden'); // Ховаємо кнопку\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n    });\n}\nfunction scrollPage() {\n    const galleryItem = document.querySelector('.gallery-item'); // Отримуємо перший елемент галереї\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect(); // Визначаємо висоту елемента\n      window.scrollBy({\n        top: height * 2, // Прокрутка на дві висоти елемента\n        behavior: 'smooth', // Плавна прокрутка\n      });\n    }\n  }"],"names":["apiKey","fetchImages","query","page","perPage","data","axios","error","renderImages","images","container","imageCards","image","clearResults","form","searchInput","resultsContainer","loader","loadMore","totalHits","lightbox","SimpleLightbox","event","iziToast","fetchAndDisplayImages","scrollPage","galleryItem","height"],"mappings":"+vBAEA,MAAMA,EAAS,qCAER,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKN,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,EACD,OAAOC,CACR,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,CCnBO,SAASC,EAAaC,EAAQC,EAAW,CAC5C,MAAMC,EAAaF,EAAO,IAAIG,GACrB;AAAA,mBACMA,EAAM,aAAa;AAAA;AAAA,wBAEdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,iCAE7BA,EAAM,KAAK;AAAA,iCACXA,EAAM,KAAK;AAAA,oCACRA,EAAM,QAAQ;AAAA,qCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAK/C,EAAE,KAAK,EAAE,EAEVF,EAAU,mBAAmB,YAAaC,CAAU,CACrD,CAEM,SAASE,EAAaH,EAAW,CACtCA,EAAU,UAAY,EAC1B,CCdA,MAAMI,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAmB,SAAS,cAAc,oBAAoB,EAC9DC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,eAAe,EAEvD,IAAIhB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIe,EAAY,EACZC,EAAW,IAAIC,EAAe,mCAAoC,CACpE,aAAc,MACd,aAAc,GAChB,CAAC,EAEDP,EAAK,iBAAiB,SAAWQ,GAAU,CAKzC,GAJAA,EAAM,eAAc,EAEnBpB,EAAQa,EAAY,MAAM,OAEvBb,IAAU,GAAI,CAChBqB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACD,MACD,CAEDpB,EAAO,EACPgB,EAAY,EAEZN,EAAaG,CAAgB,EAC7BQ,EAA2B,CAC7B,CAAC,EAEDN,EAAS,iBAAiB,QAAQ,IAAI,CAClCf,GAAM,EACNqB,GACJ,CAAC,EAED,SAASA,GAAwB,CAC/BP,EAAO,MAAM,QAAU,QAEvBhB,EAAYC,EAAOC,EAAMC,CAAO,EAC7B,KAAKC,GAAQ,CAIZ,GAHAY,EAAO,MAAM,QAAU,OAErBE,EAAUd,EAAK,UACbA,EAAK,KAAK,SAAW,GAAKF,IAAQ,EAAG,CACvCoB,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,0EACnB,CAAS,EACD,MACD,CAEDf,EAAaH,EAAK,KAAMW,CAAgB,EACxCI,EAAS,QAAO,EAEZjB,EAAO,GACTsB,IAGEtB,EAAOC,GAAWe,GACpBD,EAAS,UAAU,QAAQ,YAAa,kBAAkB,EAC1DK,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACnB,CAAS,GAEDL,EAAS,UAAU,QAAQ,mBAAoB,WAAW,CAElE,CAAK,EACA,MAAMX,GAAS,CACdU,EAAO,MAAM,QAAU,OACvBC,EAAS,UAAU,QAAQ,YAAa,kBAAkB,EAC1DK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACjB,CAAO,CACP,CAAK,CACL,CACA,SAASE,GAAa,CAClB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAClB,CAAO,CACF,CACL"}